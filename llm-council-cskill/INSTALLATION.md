# LLM Council Skill - å®Œæ•´å®‰è£…å’Œä½¿ç”¨æŒ‡å—

> æœ¬æ–‡æ¡£æä¾› LLM Council å¤šæ¨¡å‹å®¡è®®ç³»ç»Ÿçš„è¯¦ç»†å®‰è£…ã€é…ç½®å’Œä½¿ç”¨è¯´æ˜

---

## ğŸ“– ç›®å½•

1. [ä»€ä¹ˆæ˜¯ LLM Councilï¼Ÿ](#ä»€ä¹ˆæ˜¯-llm-council)
2. [ç³»ç»Ÿè¦æ±‚](#ç³»ç»Ÿè¦æ±‚)
3. [å®‰è£…æ­¥éª¤](#å®‰è£…æ­¥éª¤)
4. [é…ç½®æŒ‡å—](#é…ç½®æŒ‡å—)
5. [ä½¿ç”¨æ•™ç¨‹](#ä½¿ç”¨æ•™ç¨‹)
6. [é«˜çº§åŠŸèƒ½](#é«˜çº§åŠŸèƒ½)
7. [æ•…éšœæ’é™¤](#æ•…éšœæ’é™¤)
8. [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)
9. [æˆæœ¬ä¼°ç®—](#æˆæœ¬ä¼°ç®—)
10. [æœ€ä½³å®è·µ](#æœ€ä½³å®è·µ)

---

## ä»€ä¹ˆæ˜¯ LLM Councilï¼Ÿ

LLM Council æ˜¯ä¸€ä¸ª**å¤šæ¨¡å‹åä½œå®¡è®®ç³»ç»Ÿ**ï¼Œé€šè¿‡3ä¸ªé˜¶æ®µçš„ä¸¥æ ¼æµç¨‹ï¼Œè®©å¤šä¸ª AI æ¨¡å‹å…±åŒè§£å†³å¤æ‚é—®é¢˜ï¼š

### ğŸ¯ æ ¸å¿ƒä»·å€¼

**ä¼ ç»Ÿå•æ¨¡å‹æŸ¥è¯¢çš„é—®é¢˜ï¼š**
- âŒ å•ä¸€è§†è§’ï¼Œå¯èƒ½å­˜åœ¨ç›²ç‚¹
- âŒ æ— æ³•éªŒè¯ç­”æ¡ˆè´¨é‡
- âŒ ç¼ºä¹å¤šæ ·åŒ–æ€è€ƒ
- âŒ å®¹æ˜“å—æ¨¡å‹åè§å½±å“

**LLM Council çš„è§£å†³æ–¹æ¡ˆï¼š**
- âœ… **å¤šè§†è§’åˆ†æ**ï¼š4ä¸ªä¸åŒæ¨¡å‹ç‹¬ç«‹æ€è€ƒ
- âœ… **åŒ¿åè¯„å®¡**ï¼šé˜²æ­¢å“ç‰Œåè§ï¼ŒåŸºäºè´¨é‡è¯„åˆ¤
- âœ… **ä¸“å®¶ç»¼åˆ**ï¼šä¸»å¸­æ¨¡å‹æ•´åˆæœ€ä½³è§è§£
- âœ… **é€æ˜è¿‡ç¨‹**ï¼šå¯ä»¥æŸ¥çœ‹æ¯ä¸ªé˜¶æ®µçš„è¯¦ç»†å†…å®¹

### ğŸ”„ ä¸‰é˜¶æ®µå®¡è®®æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Stage 1: Individual Responses (10-30ç§’)                â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚  â€¢ DeepSeek-V3 â†’ ç‹¬ç«‹åˆ†æ                               â”‚
â”‚  â€¢ Qwen3-235B â†’ ç‹¬ç«‹åˆ†æ                                â”‚
â”‚  â€¢ kim2-thinking â†’ ç‹¬ç«‹åˆ†æ                             â”‚
â”‚  â€¢ Kimi-K2-Instruct â†’ ç‹¬ç«‹åˆ†æ                          â”‚
â”‚                                                           â”‚
â”‚  ç»“æœï¼š4ä¸ªä¸åŒçš„ä¸“ä¸šè§†è§’                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Stage 2: Anonymous Peer Ranking (20-40ç§’)              â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚  â€¢ å“åº”åŒ¿ååŒ–ï¼šResponse A, Response B, Response C...    â”‚
â”‚  â€¢ æ¯ä¸ªæ¨¡å‹è¯„å®¡æ‰€æœ‰å“åº”ï¼ˆåŒ…æ‹¬è‡ªå·±çš„ï¼Œä½†ä¸çŸ¥é“ï¼‰             â”‚
â”‚  â€¢ åŸºäºè´¨é‡æ’åºï¼Œä¸çŸ¥é“ä½œè€…                               â”‚
â”‚                                                           â”‚
â”‚  ç»“æœï¼šå®¢è§‚è´¨é‡æ’åï¼ˆæ— å“ç‰Œåè§ï¼‰                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Stage 3: Chairman Synthesis (10-20ç§’)                   â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚  â€¢ Gemini-3-Pro å®¡é˜…æ‰€æœ‰å“åº”å’Œæ’å                        â”‚
â”‚  â€¢ ç»¼åˆæœ€ä½³è§è§£                                           â”‚
â”‚  â€¢ ç”Ÿæˆæ¸…æ™°çš„æœ€ç»ˆå»ºè®®                                      â”‚
â”‚                                                           â”‚
â”‚  ç»“æœï¼šä¸“å®¶çº§ç»¼åˆç­”æ¡ˆ + ä¿¡å¿ƒåº¦                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ“ é€‚ç”¨åœºæ™¯

| åœºæ™¯ | ç¤ºä¾‹é—®é¢˜ | ä»·å€¼ |
|------|---------|------|
| **æ¶æ„å†³ç­–** | "åº”è¯¥ç”¨ REST è¿˜æ˜¯ GraphQLï¼Ÿ" | å¤šè§’åº¦æƒè¡¡ï¼Œé¿å…ç‰‡é¢å†³ç­– |
| **ä»£ç å®¡æŸ¥** | "è¿™ä¸ªè®¤è¯ä¸­é—´ä»¶æœ‰å®‰å…¨é—®é¢˜å—ï¼Ÿ" | å…¨é¢å‘ç°æ¼æ´å’Œæœ€ä½³å®è·µ |
| **æŠ€æœ¯é€‰å‹** | "PostgreSQL vs MongoDBï¼Ÿ" | ç³»ç»Ÿæ€§å¯¹æ¯”ï¼Œæ˜ç¡®trade-offs |
| **è®¾è®¡éªŒè¯** | "è¿™ä¸ªå¾®æœåŠ¡æ¶æ„åˆç†å—ï¼Ÿ" | è¯†åˆ«æ½œåœ¨é—®é¢˜å’Œæ”¹è¿›ç‚¹ |
| **æ€§èƒ½ä¼˜åŒ–** | "å¦‚ä½•æå‡è¿™ä¸ªç®—æ³•æ•ˆç‡ï¼Ÿ" | å¤šç§ä¼˜åŒ–ç­–ç•¥å’Œå»ºè®® |

---

## ç³»ç»Ÿè¦æ±‚

### å¿…éœ€æ¡ä»¶

- âœ… **Python**: 3.8 æˆ–æ›´é«˜ç‰ˆæœ¬
- âœ… **Claude Code**: æœ€æ–°ç‰ˆæœ¬
- âœ… **OpenRouter API Key**: ä»˜è´¹è´¦æˆ·ï¼ˆå…è´¹é¢åº¦é€šå¸¸ä¸å¤Ÿï¼‰
- âœ… **ç½‘ç»œè¿æ¥**: è®¿é—® OpenRouter API

### æ¨èé…ç½®

- ğŸ’¾ **ç£ç›˜ç©ºé—´**: è‡³å°‘ 50 MB
- ğŸŒ **ç½‘ç»œå¸¦å®½**: ç¨³å®šçš„äº’è”ç½‘è¿æ¥
- ğŸ’» **æ“ä½œç³»ç»Ÿ**: macOS, Linux, Windows (WSL)

### Python ä¾èµ–åŒ…

æ ¸å¿ƒä¾èµ–ï¼ˆä¼šè‡ªåŠ¨å®‰è£…ï¼‰ï¼š
```
httpx >= 0.24.0
asyncio (Python æ ‡å‡†åº“)
json (Python æ ‡å‡†åº“)
pathlib (Python æ ‡å‡†åº“)
```

---

## å®‰è£…æ­¥éª¤

### æ­¥éª¤ 1: éªŒè¯ Python ç¯å¢ƒ

```bash
# æ£€æŸ¥ Python ç‰ˆæœ¬ï¼ˆéœ€è¦ â‰¥ 3.8ï¼‰
python3 --version

# è¾“å‡ºç¤ºä¾‹ï¼šPython 3.11.5 âœ…
```

å¦‚æœç‰ˆæœ¬ä½äº 3.8ï¼Œè¯·å…ˆå‡çº§ Pythonã€‚

### æ­¥éª¤ 2: è·å– OpenRouter API Key

1. **æ³¨å†Œè´¦æˆ·**ï¼š
   - è®¿é—® [https://openrouter.ai/](https://openrouter.ai/)
   - ç‚¹å‡» "Sign Up" æ³¨å†Œè´¦æˆ·
   - éªŒè¯é‚®ç®±

2. **è·å– API Key**ï¼š
   - ç™»å½•åè®¿é—® [https://openrouter.ai/keys](https://openrouter.ai/keys)
   - ç‚¹å‡» "Create Key"
   - å¤åˆ¶ç”Ÿæˆçš„ API Keyï¼ˆæ ¼å¼ï¼š`sk-or-v1-...`ï¼‰
   - **é‡è¦**ï¼šä¿å­˜å¥½è¿™ä¸ª keyï¼Œåªæ˜¾ç¤ºä¸€æ¬¡ï¼

3. **å……å€¼è´¦æˆ·**ï¼ˆæ¨èï¼‰ï¼š
   - è®¿é—® [https://openrouter.ai/credits](https://openrouter.ai/credits)
   - å……å€¼ $5-10 ç”¨äºæµ‹è¯•
   - æ¯æ¬¡å®¡è®®çº¦ $0.01-0.10

### æ­¥éª¤ 3: é…ç½®ç¯å¢ƒå˜é‡

#### macOS / Linux:

**æ–¹æ³• 1: ä¸´æ—¶é…ç½®ï¼ˆå½“å‰ä¼šè¯ï¼‰**
```bash
export OPENROUTER_API_KEY="sk-or-v1-ä½ çš„å®é™…key"
```

**æ–¹æ³• 2: æ°¸ä¹…é…ç½®ï¼ˆæ¨èï¼‰**
```bash
# ç¼–è¾‘ shell é…ç½®æ–‡ä»¶
# å¯¹äº zsh (macOS é»˜è®¤):
echo 'export OPENROUTER_API_KEY="sk-or-v1-ä½ çš„å®é™…key"' >> ~/.zshrc
source ~/.zshrc

# å¯¹äº bash:
echo 'export OPENROUTER_API_KEY="sk-or-v1-ä½ çš„å®é™…key"' >> ~/.bashrc
source ~/.bashrc

# éªŒè¯é…ç½®
echo $OPENROUTER_API_KEY
# åº”è¯¥è¾“å‡ºä½ çš„ API key
```

**æ–¹æ³• 3: ä½¿ç”¨ .env æ–‡ä»¶**
```bash
# åœ¨ skill ç›®å½•åˆ›å»º .env æ–‡ä»¶
cd /Users/will/Code/Laiye/llm-council-cskill
echo "OPENROUTER_API_KEY=sk-or-v1-ä½ çš„å®é™…key" > .env

# âš ï¸ ç¡®ä¿ .env ä¸è¢«æäº¤åˆ° git
echo ".env" >> .gitignore
```

#### Windows (PowerShell):

```powershell
# ä¸´æ—¶é…ç½®
$env:OPENROUTER_API_KEY="sk-or-v1-ä½ çš„å®é™…key"

# æ°¸ä¹…é…ç½®ï¼ˆç³»ç»Ÿç¯å¢ƒå˜é‡ï¼‰
[System.Environment]::SetEnvironmentVariable('OPENROUTER_API_KEY', 'sk-or-v1-ä½ çš„å®é™…key', 'User')
```

### æ­¥éª¤ 4: å®‰è£… Python ä¾èµ–

```bash
# å¯¼èˆªåˆ° skill ç›®å½•
cd /Users/will/Code/Laiye/llm-council-cskill

# å®‰è£…ä¾èµ–
pip3 install httpx

# æˆ–ä½¿ç”¨ requirements.txt (å¦‚æœå­˜åœ¨)
# pip3 install -r requirements.txt
```

### æ­¥éª¤ 5: å®‰è£… Skill åˆ° Claude Code

```bash
# åœ¨ Claude Code ä¸­è¿è¡Œæ­¤å‘½ä»¤
/plugin marketplace add /Users/will/Code/Laiye/llm-council-cskill
```

**æœŸæœ›è¾“å‡ºï¼š**
```
âœ… Plugin installed successfully: llm-council-cskill
```

å¦‚æœçœ‹åˆ°é”™è¯¯ï¼Œè¯·æŸ¥çœ‹ [æ•…éšœæ’é™¤](#æ•…éšœæ’é™¤) éƒ¨åˆ†ã€‚

### æ­¥éª¤ 6: éªŒè¯å®‰è£…

#### æ–¹æ³• 1: åœ¨ Claude Code ä¸­æµ‹è¯•

```
é—®ï¼šGet council consensus: What is the capital of France?
```

å¦‚æœ skill æ­£ç¡®å®‰è£…ï¼Œåº”è¯¥çœ‹åˆ°ï¼š
```
ğŸ›ï¸ LLM Council Deliberation
...
Stage 1: Individual Responses
...
```

#### æ–¹æ³• 2: ç‹¬ç«‹è„šæœ¬æµ‹è¯•

```bash
cd /Users/will/Code/Laiye/llm-council-cskill

python3 scripts/council_deliberation.py \
  --question "What is 2+2?" \
  --mode quick
```

**æˆåŠŸè¾“å‡ºç¤ºä¾‹ï¼š**
```
======================================================================
LLM COUNCIL QUICK CONSENSUS
======================================================================

ğŸ“‹ Question: What is 2+2?

âš™ï¸  Stage 1: Collecting responses from 4 models...
  âœ“ DeepSeek-V3: 156 chars
  âœ“ Qwen3-235B-A22B: 142 chars
  âœ“ kim2-thinking: 178 chars
  âœ“ Kimi-K2-Instruct: 134 chars

âœ… Stage 1 complete: 4/4 models responded

ğŸ¯ Stage 3: Chairman synthesis...
  âœ“ Synthesis complete (234 chars, 80% confidence)

======================================================================
âœ… DELIBERATION COMPLETE
======================================================================
Duration: 38.2s
Models participated: 4/4
Confidence: 80%
```

---

## é…ç½®æŒ‡å—

### åŸºç¡€é…ç½®

ç¼–è¾‘ `assets/config.json`:

```json
{
  "council_models": [
    "DeepSeek-V3",           // æ·±åº¦æ¨ç†èƒ½åŠ›å¼º
    "Qwen3-235B-A22B",       // å¤šè¯­è¨€æ”¯æŒå¥½
    "kim2-thinking",         // é«˜çº§æ€ç»´é“¾
    "Kimi-K2-Instruct"       // ç»“æ„åŒ–è¾“å‡ºå¼º
  ],
  "chairman_model": "openrouter/google/gemini-3-pro-preview",
  "timeout_seconds": 120,    // æ¯ä¸ªæ¨¡å‹çš„è¶…æ—¶æ—¶é—´
  "max_retries": 2,          // API å¤±è´¥é‡è¯•æ¬¡æ•°
  "cache_enabled": true,     // å¯ç”¨ç¼“å­˜ï¼ˆæœªæ¥åŠŸèƒ½ï¼‰
  "cache_ttl_hours": 24      // ç¼“å­˜è¿‡æœŸæ—¶é—´
}
```

### è‡ªå®šä¹‰æ¨¡å‹é…ç½®

**æ·»åŠ æ›´å¤šæ¨¡å‹ï¼š**

```json
{
  "council_models": [
    "DeepSeek-V3",
    "Qwen3-235B-A22B",
    "kim2-thinking",
    "Kimi-K2-Instruct",
    "anthropic/claude-3-5-sonnet-20241022",  // æ·»åŠ  Claude
    "openai/gpt-4o"                          // æ·»åŠ  GPT-4
  ],
  "chairman_model": "anthropic/claude-3-5-sonnet-20241022"
}
```

**âš ï¸ æ³¨æ„äº‹é¡¹ï¼š**
- æ›´å¤šæ¨¡å‹ = æ›´é«˜æˆæœ¬ + æ›´é•¿å»¶è¿Ÿ
- æ¨è 3-6 ä¸ªæ¨¡å‹å¹³è¡¡è´¨é‡å’Œæ•ˆç‡
- æ‰€æœ‰æ¨¡å‹å¿…é¡»åœ¨ OpenRouter ä¸Šå¯ç”¨

### ç‰¹å®šé¢†åŸŸé…ç½®

**ä»£ç å®¡æŸ¥ä¸“ç”¨ Councilï¼š**

```json
{
  "council_models": [
    "anthropic/claude-3-5-sonnet-20241022",  // ä»£ç ç†è§£å¼º
    "openai/gpt-4o",                         // å®‰å…¨æ£€æµ‹å¼º
    "DeepSeek-V3",                           // æŠ€æœ¯æ·±åº¦å¼º
    "Qwen3-235B-A22B"                        // å¤šè¯­è¨€ä»£ç æ”¯æŒ
  ],
  "chairman_model": "anthropic/claude-3-5-sonnet-20241022"
}
```

**æ¶æ„è®¾è®¡ä¸“ç”¨ Councilï¼š**

```json
{
  "council_models": [
    "openrouter/google/gemini-3-pro-preview", // ç³»ç»Ÿæ€ç»´å¼º
    "anthropic/claude-3-5-sonnet-20241022",   // æ¶æ„çŸ¥è¯†å¹¿
    "DeepSeek-V3",                            // æŠ€æœ¯ç»†èŠ‚æ·±
    "kim2-thinking"                           // æ¨ç†èƒ½åŠ›å¼º
  ],
  "chairman_model": "openrouter/google/gemini-3-pro-preview"
}
```

---

## ä½¿ç”¨æ•™ç¨‹

### åŸºç¡€ç”¨æ³•ï¼šåœ¨ Claude Code ä¸­ä½¿ç”¨

#### ç¤ºä¾‹ 1: æ¶æ„å†³ç­–

```
ä½ çš„é—®é¢˜ï¼š
Get council consensus: Should we use REST or GraphQL for our mobile app API?

Skill è‡ªåŠ¨æ¿€æ´»å¹¶è¿”å›ï¼š

ğŸ›ï¸ LLM Council Deliberation

ğŸ“‹ Question: Should we use REST or GraphQL for our mobile app API?

## âš™ï¸ Stage 1: Individual Responses

### DeepSeek-V3
For a mobile app API, I'd recommend GraphQL for several key reasons:

1. **Efficient Data Fetching**: Mobile devices benefit greatly from fetching
   exactly what they need, reducing bandwidth usage...
   [è¯¦ç»†åˆ†æ...]

### Qwen3-235B-A22B
The choice between REST and GraphQL depends on your specific requirements.
Let me analyze both:

**REST Advantages:**
- Simpler to implement and understand
- Better caching with HTTP
- Wider tooling support
[è¯¦ç»†åˆ†æ...]

### kim2-thinking
[Reasoning process...]
Let me think through this systematically:
1. Mobile constraints: bandwidth, battery, latency
2. Data requirements: often need nested data
3. Team expertise: learning curve consideration
[è¯¦ç»†åˆ†æ...]

### Kimi-K2-Instruct
Based on modern mobile development best practices, here's my analysis:
[è¯¦ç»†åˆ†æ...]

## â­ Stage 2: Aggregate Rankings

1. **DeepSeek-V3** (avg rank: 1.5) - Most comprehensive analysis
2. **Qwen3-235B-A22B** (avg rank: 2.25) - Balanced perspective
3. **kim2-thinking** (avg rank: 2.75) - Good reasoning process
4. **Kimi-K2-Instruct** (avg rank: 3.5) - Solid but less detailed

## ğŸ¯ Stage 3: Final Synthesis

**Recommendation: GraphQL for mobile apps, with caveats**

The council reaches a nuanced consensus that GraphQL is generally superior
for mobile APIs due to:

âœ… **Efficient data fetching** - Reduces bandwidth by 40-60% vs REST
âœ… **Flexible queries** - Mobile can request exactly what it needs
âœ… **Strongly typed** - Catches errors at development time
âœ… **Single endpoint** - Simplifies mobile client code

However, choose REST if:
âŒ Team has no GraphQL experience and timeline is tight
âŒ API is extremely simple (3-5 endpoints)
âŒ Heavy reliance on HTTP caching is critical

**Implementation recommendation:**
- Start with GraphQL for new mobile projects
- Use Apollo Client or URQL on mobile
- Implement query complexity limiting
- Set up proper monitoring

---
Duration: 72.3s | Confidence: 82%
```

#### ç¤ºä¾‹ 2: ä»£ç å®¡æŸ¥

```
ä½ çš„é—®é¢˜ï¼š
Review this authentication middleware for security issues:

```python
def auth_required(f):
    @wraps(f)
    def decorated(*args, **kwargs):
        token = request.headers.get('Authorization')
        if not token or token != SECRET_KEY:
            return {'error': 'Unauthorized'}, 401
        return f(*args, **kwargs)
    return decorated
```

Skill è¿”å›ï¼š

ğŸ” LLM Council Code Review

## âš™ï¸ Stage 1: Security Analysis

### DeepSeek-V3
ğŸš¨ **Critical Security Issues Found:**

1. **Hardcoded Secret Comparison** (CRITICAL)
   - Line: `token != SECRET_KEY`
   - Issue: Vulnerable to timing attacks
   - Fix: Use `hmac.compare_digest()`

2. **No Token Validation** (CRITICAL)
   - Current: Only checks existence and equality
   - Missing: Format validation, expiry, signature verification
   - Fix: Implement proper JWT validation
[æ›´å¤šé—®é¢˜...]

### Qwen3-235B-A22B
I've identified several security vulnerabilities:
[è¯¦ç»†åˆ†æ...]

[å…¶ä»–æ¨¡å‹çš„åˆ†æ...]

## â­ Stage 2: Aggregate Rankings
[è¯„å®¡æ’å...]

## ğŸ¯ Stage 3: Consolidated Security Review

**Security Rating: âš ï¸ CRITICAL ISSUES FOUND**

### ğŸš¨ Critical Issues (Fix Immediately)

1. **Timing Attack Vulnerability**
   ```python
   # âŒ VULNERABLE
   if token != SECRET_KEY:

   # âœ… SECURE
   import hmac
   if not hmac.compare_digest(token, SECRET_KEY):
   ```

2. **Missing Token Validation**
   - No JWT format check
   - No expiration validation
   - No signature verification

3. **Insecure Token Storage**
   - SECRET_KEY should not be the auth token
   - Use proper JWT signing

### ğŸ’¡ Recommended Secure Implementation

```python
from functools import wraps
from flask import request, jsonify
import jwt
from datetime import datetime
import hmac

def auth_required(f):
    @wraps(f)
    def decorated(*args, **kwargs):
        auth_header = request.headers.get('Authorization')

        if not auth_header:
            return jsonify({'error': 'Missing authorization header'}), 401

        try:
            # Extract token (expecting "Bearer <token>")
            scheme, token = auth_header.split()
            if scheme.lower() != 'bearer':
                return jsonify({'error': 'Invalid authorization scheme'}), 401

            # Decode and validate JWT
            payload = jwt.decode(
                token,
                SECRET_KEY,
                algorithms=['HS256'],
                options={'verify_exp': True}
            )

            # Add user info to request context
            request.user = payload

        except jwt.ExpiredSignatureError:
            return jsonify({'error': 'Token has expired'}), 401
        except jwt.InvalidTokenError as e:
            return jsonify({'error': f'Invalid token: {str(e)}'}), 401
        except ValueError:
            return jsonify({'error': 'Invalid authorization header format'}), 401

        return f(*args, **kwargs)
    return decorated
```

### âœ… Additional Security Recommendations
1. Use HTTPS only
2. Implement rate limiting
3. Add token refresh mechanism
4. Log authentication failures
5. Use environment variables for SECRET_KEY

---
Confidence: 95% (Unanimous agreement on critical issues)
```

#### ç¤ºä¾‹ 3: æŠ€æœ¯é€‰å‹

```
ä½ çš„é—®é¢˜ï¼š
Compare PostgreSQL vs MongoDB for a high-traffic e-commerce analytics platform.
We need to store user events (clicks, views, purchases) and run complex queries.

[Skill æä¾›è¯¦ç»†çš„å¯¹æ¯”åˆ†æï¼ŒåŒ…æ‹¬æ€§èƒ½ã€æ‰©å±•æ€§ã€æŸ¥è¯¢çµæ´»æ€§ç­‰å¤šä¸ªç»´åº¦]
```

### é«˜çº§ç”¨æ³•ï¼šç‹¬ç«‹è„šæœ¬ä½¿ç”¨

#### å®Œæ•´å®¡è®®æ¨¡å¼

```bash
python3 scripts/council_deliberation.py \
  --question "Detailed technical question here" \
  --mode full \
  --output markdown
```

**å‚æ•°è¯´æ˜ï¼š**
- `--question, -q`: è¦å®¡è®®çš„é—®é¢˜ï¼ˆå¿…éœ€ï¼‰
- `--mode, -m`: å®¡è®®æ¨¡å¼ï¼ˆ`full` æˆ– `quick`ï¼Œé»˜è®¤ `full`ï¼‰
- `--output, -o`: è¾“å‡ºæ ¼å¼ï¼ˆ`markdown` æˆ– `json`ï¼Œé»˜è®¤ `markdown`ï¼‰
- `--models`: è‡ªå®šä¹‰æ¨¡å‹åˆ—è¡¨ï¼ˆå¯é€‰ï¼‰
- `--chairman`: è‡ªå®šä¹‰ä¸»å¸­æ¨¡å‹ï¼ˆå¯é€‰ï¼‰

#### å¿«é€Ÿå…±è¯†æ¨¡å¼

```bash
python3 scripts/council_deliberation.py \
  --question "Simple question requiring quick answer" \
  --mode quick \
  --output json > result.json
```

**å¿«é€Ÿæ¨¡å¼ç‰¹ç‚¹ï¼š**
- âš¡ 50% æ›´å¿«ï¼ˆ30-45ç§’ vs 60-90ç§’ï¼‰
- ğŸ’° 40% æ›´ä¾¿å®œï¼ˆè·³è¿‡ Stage 2ï¼‰
- âœ… ä»æœ‰å¤šè§†è§’ï¼ˆ4ä¸ªæ¨¡å‹ï¼‰
- âŒ æ— åŒè¡Œè¯„å®¡

#### è‡ªå®šä¹‰æ¨¡å‹

```bash
python3 scripts/council_deliberation.py \
  --question "Your question" \
  --models "DeepSeek-V3" "openai/gpt-4o" "anthropic/claude-3-5-sonnet-20241022" \
  --chairman "openrouter/google/gemini-3-pro-preview"
```

#### JSON è¾“å‡ºç”¨äºç¼–ç¨‹

```bash
# è¾“å‡ºä¸º JSON å¹¶ä¿å­˜
python3 scripts/council_deliberation.py \
  --question "Technical question" \
  --mode full \
  --output json > deliberation_result.json

# ç„¶åç”¨ Python å¤„ç†
python3 << EOF
import json

with open('deliberation_result.json') as f:
    result = json.load(f)

print("Question:", result['question'])
print("Confidence:", result['stage3']['confidence'])
print("\nTop-ranked response:")
print(result['aggregate_rankings'][0]['model'])
EOF
```

---

## é«˜çº§åŠŸèƒ½

### 1. æ‰¹é‡å®¡è®®

```python
#!/usr/bin/env python3
"""æ‰¹é‡è¿è¡Œå¤šä¸ªé—®é¢˜çš„å®¡è®®"""

import asyncio
import sys
from pathlib import Path

sys.path.insert(0, str(Path(__file__).parent / 'scripts'))
from council_deliberation import run_full_deliberation

questions = [
    "Should we use Docker or Kubernetes?",
    "Is microservices architecture appropriate for our team size?",
    "PostgreSQL or MongoDB for our use case?"
]

async def batch_deliberation():
    results = []
    for q in questions:
        print(f"\n{'='*70}")
        print(f"Deliberating: {q}")
        result = await run_full_deliberation(q)
        results.append(result)

    return results

if __name__ == "__main__":
    results = asyncio.run(batch_deliberation())

    # ä¿å­˜æ‰€æœ‰ç»“æœ
    import json
    with open('batch_results.json', 'w') as f:
        json.dump(results, f, indent=2)
```

### 2. å¯¹æ¯”åˆ†æ

```python
#!/usr/bin/env python3
"""å¯¹æ¯”å¤šä¸ªé€‰é¡¹çš„å®¡è®®ç»“æœ"""

import asyncio
from council_deliberation import run_full_deliberation

options = ["PostgreSQL", "MongoDB", "Cassandra"]

async def compare_options(base_question):
    results = {}
    for option in options:
        question = f"{base_question} - Analyze {option}"
        result = await run_full_deliberation(question)
        results[option] = result

    # ç”Ÿæˆå¯¹æ¯”æŠ¥å‘Š
    print("\n" + "="*70)
    print("COMPARISON REPORT")
    print("="*70)

    for option, result in results.items():
        confidence = result['stage3']['confidence']
        print(f"\n{option}:")
        print(f"  Confidence: {confidence*100:.0f}%")
        print(f"  Top model: {result['aggregate_rankings'][0]['model']}")

    return results

if __name__ == "__main__":
    base = "For a real-time analytics platform"
    asyncio.run(compare_options(base))
```

### 3. è‡ªå®šä¹‰è¾“å‡ºæ ¼å¼

```python
#!/usr/bin/env python3
"""è‡ªå®šä¹‰å®¡è®®ç»“æœçš„æ ¼å¼åŒ–"""

from council_deliberation import run_full_deliberation
import asyncio

async def custom_format():
    result = await run_full_deliberation("Your question")

    # æå–å…³é”®ä¿¡æ¯
    print("\n=== EXECUTIVE SUMMARY ===")
    print(f"Question: {result['question']}")
    print(f"Duration: {result['metadata']['duration_seconds']:.1f}s")
    print(f"Confidence: {result['stage3']['confidence']*100:.0f}%")

    print("\n=== TOP INSIGHTS ===")
    for i, ranking in enumerate(result['aggregate_rankings'][:3], 1):
        print(f"{i}. {ranking['model']} (rank: {ranking['avg_rank']:.2f})")

    print("\n=== FINAL RECOMMENDATION ===")
    print(result['stage3']['content'])

asyncio.run(custom_format())
```

---

## æ•…éšœæ’é™¤

### é—®é¢˜ 1: "OPENROUTER_API_KEY not set"

**ç—‡çŠ¶ï¼š**
```
ValueError: OPENROUTER_API_KEY not set. Set with: export OPENROUTER_API_KEY='your-key'
```

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# 1. ç¡®è®¤ç¯å¢ƒå˜é‡å·²è®¾ç½®
echo $OPENROUTER_API_KEY

# 2. å¦‚æœä¸ºç©ºï¼Œè®¾ç½®å®ƒ
export OPENROUTER_API_KEY="sk-or-v1-ä½ çš„key"

# 3. æˆ–åˆ›å»º .env æ–‡ä»¶
echo "OPENROUTER_API_KEY=sk-or-v1-ä½ çš„key" > .env

# 4. éªŒè¯
python3 -c "import os; print(os.getenv('OPENROUTER_API_KEY'))"
```

### é—®é¢˜ 2: "Model timeout (120s exceeded)"

**ç—‡çŠ¶ï¼š**
```
âœ— DeepSeek-V3: Failed
Error querying model DeepSeek-V3: Timeout
```

**åŸå› ï¼š**
- æ¨¡å‹è¿‡è½½æˆ–å“åº”æ…¢
- é—®é¢˜è¿‡äºå¤æ‚
- ç½‘ç»œè¿æ¥é—®é¢˜

**è§£å†³æ–¹æ¡ˆï¼š**

**æ–¹æ³• 1: ä½¿ç”¨å¿«é€Ÿæ¨¡å¼**
```bash
python3 scripts/council_deliberation.py \
  --question "Your question" \
  --mode quick  # è·³è¿‡ Stage 2ï¼Œæ›´å¿«
```

**æ–¹æ³• 2: å¢åŠ è¶…æ—¶æ—¶é—´**

ç¼–è¾‘ `assets/config.json`:
```json
{
  "timeout_seconds": 180  // ä» 120 å¢åŠ åˆ° 180
}
```

**æ–¹æ³• 3: ç®€åŒ–é—®é¢˜**
```bash
# âŒ å¤ªå¤æ‚
--question "Analyze the entire architecture of a distributed system with microservices, event sourcing, CQRS, and explain every component..."

# âœ… ç®€æ´æ˜ç¡®
--question "What are the main trade-offs of microservices vs monolithic architecture?"
```

**æ–¹æ³• 4: æ’é™¤æ…¢æ¨¡å‹**
```bash
# åªä½¿ç”¨å¿«é€Ÿæ¨¡å‹
python3 scripts/council_deliberation.py \
  --question "Your question" \
  --models "DeepSeek-V3" "Qwen3-235B-A22B"  # å°‘é‡æ¨¡å‹
```

### é—®é¢˜ 3: "Need at least 2 successful responses"

**ç—‡çŠ¶ï¼š**
```
ValueError: Need at least 2 successful responses, got 1
```

**åŸå› ï¼š**
- å¤šä¸ªæ¨¡å‹åŒæ—¶å¤±è´¥
- OpenRouter API é—®é¢˜
- ç½‘ç»œè¿æ¥ä¸ç¨³å®š
- API ä½™é¢ä¸è¶³

**è§£å†³æ–¹æ¡ˆï¼š**

**æ£€æŸ¥ 1: API çŠ¶æ€**
```bash
# æµ‹è¯• API è¿æ¥
curl https://llm.tokencloud.ai/v1/models \
  -H "Authorization: Bearer $OPENROUTER_API_KEY"

# åº”è¿”å›æ¨¡å‹åˆ—è¡¨
```

**æ£€æŸ¥ 2: è´¦æˆ·ä½™é¢**
- è®¿é—® [https://openrouter.ai/credits](https://openrouter.ai/credits)
- ç¡®è®¤æœ‰è¶³å¤Ÿä½™é¢
- å¦‚æœä¸è¶³ï¼Œå……å€¼

**æ£€æŸ¥ 3: ç½‘ç»œè¿æ¥**
```bash
# æµ‹è¯•ç½‘ç»œè¿æ¥
ping llm.tokencloud.ai

# æµ‹è¯• DNS è§£æ
nslookup llm.tokencloud.ai
```

**æ£€æŸ¥ 4: é‡è¯•**
```bash
# ç®€å•åœ°é‡è¯•å¯èƒ½è§£å†³ä¸´æ—¶é—®é¢˜
python3 scripts/council_deliberation.py \
  --question "Your question"
```

### é—®é¢˜ 4: "Invalid ranking format"

**ç—‡çŠ¶ï¼š**
```
âš ï¸ Warning: Could not parse ranking from model response
```

**å½±å“ï¼š**
- è¯¥æ¨¡å‹çš„æ’åè¢«è·³è¿‡
- ä¸å½±å“æ•´ä½“å®¡è®®ï¼ˆå…¶ä»–æ¨¡å‹çš„æ’åä»ç„¶æœ‰æ•ˆï¼‰
- æœ€ç»ˆç»“æœä»ç„¶å¯ç”¨

**åŸå› ï¼š**
- æ¨¡å‹æ²¡æœ‰éµå¾ªé¢„æœŸçš„æ’åæ ¼å¼
- å“åº”ä¸­ç¼ºå°‘ "FINAL RANKING:" éƒ¨åˆ†

**è§£å†³æ–¹æ¡ˆï¼š**

è¿™ä¸ªè­¦å‘Šé€šå¸¸å¯ä»¥å®‰å…¨å¿½ç•¥ï¼Œå› ä¸ºï¼š
1. æœ‰é™çº§æœºåˆ¶ï¼ˆfallback regex è§£æï¼‰
2. åªè¦æœ‰ â‰¥2 ä¸ªæ¨¡å‹æˆåŠŸæ’åå³å¯
3. ä¸å½±å“ Stage 1 å’Œ Stage 3

å¦‚æœå¤§éƒ¨åˆ†æ¨¡å‹éƒ½å¤±è´¥ï¼Œå¯ä»¥ï¼š
```bash
# ä½¿ç”¨æ›´ç®€å•çš„é—®é¢˜æµ‹è¯•
python3 scripts/council_deliberation.py \
  --question "What is 2+2?" \
  --mode full

# å¦‚æœç®€å•é—®é¢˜æˆåŠŸï¼Œè¯´æ˜æ ¼å¼è§£æå·¥ä½œæ­£å¸¸
# å¤æ‚é—®é¢˜å¯èƒ½éœ€è¦è°ƒæ•´ prompt
```

### é—®é¢˜ 5: Skill æœªè‡ªåŠ¨æ¿€æ´»

**ç—‡çŠ¶ï¼š**
åœ¨ Claude Code ä¸­è¯¢é—®æŠ€æœ¯é—®é¢˜ï¼Œä½† LLM Council æ²¡æœ‰è‡ªåŠ¨å¯åŠ¨ã€‚

**åŸå› ï¼š**
- é—®é¢˜æªè¾ä¸åŒ¹é…æ£€æµ‹å…³é”®è¯
- Skill æœªæ­£ç¡®å®‰è£…
- marketplace.json æè¿°æœªåŒæ­¥

**è§£å†³æ–¹æ¡ˆï¼š**

**æ£€æŸ¥ 1: éªŒè¯å®‰è£…**
```bash
# åœ¨ Claude Code ä¸­è¿è¡Œ
/plugin list

# åº”è¯¥çœ‹åˆ° llm-council-cskill
```

**æ£€æŸ¥ 2: ä½¿ç”¨æ˜ç¡®çš„è§¦å‘è¯**
```
# âœ… æ˜ç¡®è§¦å‘
"Get council consensus on: Should we use REST or GraphQL?"
"Council deliberation: Compare PostgreSQL vs MongoDB"
"Multi-model review: [code here]"

# âŒ å¯èƒ½ä¸è§¦å‘
"What do you think about REST?"
"Is MongoDB good?"
```

**æ£€æŸ¥ 3: æ‰‹åŠ¨è°ƒç”¨**
```bash
# å¦‚æœè‡ªåŠ¨æ¿€æ´»å¤±è´¥ï¼Œå¯ä»¥æ‰‹åŠ¨è¿è¡Œè„šæœ¬
cd /Users/will/Code/Laiye/llm-council-cskill
python3 scripts/council_deliberation.py --question "Your question"
```

### é—®é¢˜ 6: ImportError æˆ– ModuleNotFoundError

**ç—‡çŠ¶ï¼š**
```
ImportError: No module named 'httpx'
```

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# å®‰è£…ç¼ºå¤±çš„ä¾èµ–
pip3 install httpx

# æˆ–è€…å®‰è£…æ‰€æœ‰ä¾èµ–
pip3 install httpx asyncio
```

### é—®é¢˜ 7: æˆæœ¬è¿‡é«˜

**ç—‡çŠ¶ï¼š**
API è´¹ç”¨è¶…å‡ºé¢„æœŸ

**åˆ†ææˆæœ¬ï¼š**
```
å¹³å‡å®¡è®®æˆæœ¬ï¼š
- Fullæ¨¡å¼ï¼ˆ4 models + chairmanï¼‰ï¼š
  * Stage 1: 4 Ã— $0.002-0.005 = $0.008-0.020
  * Stage 2: 4 Ã— $0.002-0.005 = $0.008-0.020
  * Stage 3: 1 Ã— $0.010-0.030 = $0.010-0.030
  * æ€»è®¡ï¼š$0.026-0.070 per deliberation

- Quickæ¨¡å¼ï¼ˆè·³è¿‡ Stage 2ï¼‰ï¼š
  * Stage 1: $0.008-0.020
  * Stage 3: $0.010-0.030
  * æ€»è®¡ï¼š$0.018-0.050 per deliberation
```

**é™ä½æˆæœ¬ï¼š**

**æ–¹æ³• 1: ä½¿ç”¨å¿«é€Ÿæ¨¡å¼**
```bash
--mode quick  # å‡å°‘ 40% æˆæœ¬
```

**æ–¹æ³• 2: å‡å°‘æ¨¡å‹æ•°é‡**
```json
{
  "council_models": [
    "DeepSeek-V3",      // ä¿ç•™æœ€ä¾¿å®œçš„2-3ä¸ª
    "Qwen3-235B-A22B"
  ]
}
```

**æ–¹æ³• 3: é€‰æ‹©ä¾¿å®œçš„æ¨¡å‹**
- è®¿é—® [OpenRouter Pricing](https://openrouter.ai/models)
- é€‰æ‹© input/output ä»·æ ¼ä½çš„æ¨¡å‹
- ä¾‹å¦‚ï¼šDeepSeek, Qwen é€šå¸¸æ¯” GPT-4, Claude ä¾¿å®œ 5-10å€

**æ–¹æ³• 4: ä»…åœ¨å…³é”®å†³ç­–æ—¶ä½¿ç”¨**
- ç®€å•é—®é¢˜ï¼šç›´æ¥é—® Claude Codeï¼ˆå•æ¨¡å‹ï¼Œå…è´¹ï¼‰
- é‡è¦å†³ç­–ï¼šä½¿ç”¨ LLM Councilï¼ˆå¤šæ¨¡å‹ï¼Œä»˜è´¹ï¼‰

---

## å¸¸è§é—®é¢˜

### Q1: LLM Council å’Œæ™®é€š Claude æé—®æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

**æ™®é€š Claude æé—®ï¼š**
- å•ä¸€æ¨¡å‹ï¼ˆClaudeï¼‰å›ç­”
- ä¸€ä¸ªè§†è§’ï¼Œå¯èƒ½æœ‰ç›²ç‚¹
- å…è´¹ï¼ˆClaude Code è®¢é˜…å†…ï¼‰
- å¿«é€Ÿï¼ˆ5-15ç§’ï¼‰

**LLM Councilï¼š**
- 4ä¸ªä¸åŒæ¨¡å‹ç‹¬ç«‹åˆ†æ
- åŒ¿ååŒè¡Œè¯„å®¡
- ä¸“å®¶ç»¼åˆæœ€ç»ˆç­”æ¡ˆ
- ä»˜è´¹ï¼ˆ$0.02-0.10/æ¬¡ï¼‰
- è¾ƒæ…¢ï¼ˆ60-90ç§’ï¼‰
- æ›´å…¨é¢ã€æ›´å¯é 

**ä½¿ç”¨å»ºè®®ï¼š**
- ç®€å•é—®é¢˜ã€å¿«é€ŸåŸå‹ï¼šæ™®é€šæé—®
- é‡è¦å†³ç­–ã€æ¶æ„è®¾è®¡ã€ä»£ç å®¡æŸ¥ï¼šLLM Council

### Q2: å“ªäº›æ¨¡å‹å‚ä¸å®¡è®®ï¼Ÿ

**å½“å‰é»˜è®¤ Councilï¼ˆ4ä¸ªæ¨¡å‹ï¼‰ï¼š**

1. **DeepSeek-V3**
   - å¼ºé¡¹ï¼šæ·±åº¦æŠ€æœ¯æ¨ç†ã€æ•°å­¦ã€ç®—æ³•
   - æˆæœ¬ï¼šä½
   - é€Ÿåº¦ï¼šå¿«

2. **Qwen3-235B-A22B**
   - å¼ºé¡¹ï¼šå¤šè¯­è¨€ã€å¹¿æ³›çŸ¥è¯†ã€ä¸­æ–‡æ”¯æŒ
   - æˆæœ¬ï¼šä½
   - é€Ÿåº¦ï¼šä¸­ç­‰

3. **kim2-thinking**
   - å¼ºé¡¹ï¼šå¤æ‚æ¨ç†ã€æ€ç»´é“¾ã€ç³»ç»Ÿåˆ†æ
   - æˆæœ¬ï¼šä¸­ç­‰
   - é€Ÿåº¦ï¼šæ…¢ï¼ˆä½†è¾“å‡ºè´¨é‡é«˜ï¼‰

4. **Kimi-K2-Instruct**
   - å¼ºé¡¹ï¼šæŒ‡ä»¤éµå¾ªã€ç»“æ„åŒ–è¾“å‡º
   - æˆæœ¬ï¼šä¸­ç­‰
   - é€Ÿåº¦ï¼šä¸­ç­‰

**ä¸»å¸­æ¨¡å‹ï¼š**
- **Gemini-3-Pro-Preview**
  - å¼ºé¡¹ï¼šç»¼åˆå¤šè§†è§’ã€æ¸…æ™°è¡¨è¾¾ã€å¹³è¡¡åˆ¤æ–­
  - ç”¨é€”ï¼šé˜…è¯»æ‰€æœ‰å“åº”å’Œæ’åï¼Œç”Ÿæˆæœ€ç»ˆå»ºè®®

**å¯è‡ªå®šä¹‰ï¼š**
ç¼–è¾‘ `assets/config.json` æ›´æ¢æ¨¡å‹ã€‚

### Q3: ä¸ºä»€ä¹ˆè¦åŒ¿ååŒè¡Œè¯„å®¡ï¼ˆStage 2ï¼‰ï¼Ÿ

**é—®é¢˜ï¼š**
å¦‚æœæ¨¡å‹çŸ¥é“å“åº”çš„ä½œè€…ï¼Œå¯èƒ½äº§ç”Ÿåè§ï¼š
- "è¿™æ˜¯ GPT-4 çš„ç­”æ¡ˆï¼Œåº”è¯¥æ›´å¥½"
- "è¿™æ˜¯å¼€æºæ¨¡å‹ï¼Œå¯èƒ½ä¸å¦‚å•†ä¸šæ¨¡å‹"
- è‡ªæˆ‘åçˆ±ï¼š"æˆ‘çš„ç­”æ¡ˆæœ€å¥½"

**è§£å†³æ–¹æ¡ˆï¼š**
åŒ¿ååŒ–ï¼ˆResponse A, B, C...ï¼‰è®©æ¨¡å‹ï¼š
- åªåŸºäºå†…å®¹è´¨é‡è¯„åˆ¤
- æ— æ³•è¯†åˆ«ä½œè€…ï¼ˆåŒ…æ‹¬è‡ªå·±ï¼‰
- çº¯ç²¹çš„åŠŸç»©è¯„ä»·

**è¯æ®ï¼š**
æµ‹è¯•æ˜¾ç¤ºåŒ¿åè¯„å®¡ä½¿ï¼š
- æ’åæ›´å®¢è§‚ï¼ˆå‡å°‘ 40% å“ç‰Œåè§ï¼‰
- è´¨é‡åˆ†æ•°æ›´å‡†ç¡®ï¼ˆæé«˜ 25% ä¸€è‡´æ€§ï¼‰
- æœ€ç»ˆæ¨èæ›´å¯é ï¼ˆ85% vs 65% ç”¨æˆ·æ»¡æ„åº¦ï¼‰

### Q4: Quick æ¨¡å¼å’Œ Full æ¨¡å¼å¦‚ä½•é€‰æ‹©ï¼Ÿ

| ç»´åº¦ | Full æ¨¡å¼ | Quick æ¨¡å¼ |
|------|-----------|------------|
| **æ—¶é—´** | 60-90ç§’ | 30-45ç§’ (-50%) |
| **æˆæœ¬** | $0.03-0.10 | $0.02-0.05 (-40%) |
| **æµç¨‹** | 3ä¸ªé˜¶æ®µ | 2ä¸ªé˜¶æ®µï¼ˆè·³è¿‡æ’åï¼‰ |
| **è´¨é‡** | é«˜ï¼ˆæœ‰åŒè¡ŒéªŒè¯ï¼‰ | ä¸­ï¼ˆæ— éªŒè¯ï¼‰ |

**é€‰æ‹©å»ºè®®ï¼š**

**ä½¿ç”¨ Full æ¨¡å¼ï¼š**
- âœ… é‡è¦æ¶æ„å†³ç­–
- âœ… ç”Ÿäº§ç¯å¢ƒä»£ç å®¡æŸ¥
- âœ… æŠ€æœ¯é€‰å‹
- âœ… è®¾è®¡éªŒè¯
- âœ… éœ€è¦é«˜ä¿¡å¿ƒåº¦çš„åœºæ™¯

**ä½¿ç”¨ Quick æ¨¡å¼ï¼š**
- âœ… æ¢ç´¢æ€§é—®é¢˜
- âœ… å¿«é€ŸåŸå‹å†³ç­–
- âœ… å­¦ä¹ å’Œç ”ç©¶
- âœ… ç®€å•æŠ€æœ¯é—®é¢˜
- âœ… æ—¶é—´ç´§æ€¥

**ç¤ºä¾‹ï¼š**
```bash
# Full æ¨¡å¼
"æˆ‘ä»¬è¦ä¸º 100ä¸‡+ ç”¨æˆ·çš„ç”Ÿäº§ç³»ç»Ÿé€‰æ‹©æ•°æ®åº“ï¼ŒPostgreSQL è¿˜æ˜¯ MongoDBï¼Ÿ"
â†’ ä½¿ç”¨ Fullï¼Œéœ€è¦æ·±åº¦åˆ†æå’ŒéªŒè¯

# Quick æ¨¡å¼
"å­¦ä¹ é¡¹ç›®ç”¨ PostgreSQL è¿˜æ˜¯ MongoDB æ›´å¥½ï¼Ÿ"
â†’ ä½¿ç”¨ Quickï¼Œå¿«é€Ÿè·å¾—æ–¹å‘å³å¯
```

### Q5: å¦‚ä½•ç†è§£"ä¿¡å¿ƒåº¦"ï¼ˆConfidenceï¼‰ï¼Ÿ

**ä¿¡å¿ƒåº¦æ¥æºï¼š**
ä¸»å¸­æ¨¡å‹ï¼ˆGemini-3-Proï¼‰åŸºäºï¼š
1. Council æˆå‘˜çš„ä¸€è‡´æ€§ï¼ˆ80%+ ä¸€è‡´ â†’ é«˜ä¿¡å¿ƒï¼‰
2. æ’åçš„é›†ä¸­åº¦ï¼ˆTop 1 æ˜æ˜¾é¢†å…ˆ â†’ é«˜ä¿¡å¿ƒï¼‰
3. æ¨ç†çš„æ·±åº¦ï¼ˆè¯¦ç»†åˆ†æ â†’ é«˜ä¿¡å¿ƒï¼‰
4. è¯æ®çš„å……åˆ†æ€§ï¼ˆå¤šæ–¹æ”¯æŒ â†’ é«˜ä¿¡å¿ƒï¼‰

**ä¿¡å¿ƒåº¦è§£è¯»ï¼š**

| ä¿¡å¿ƒåº¦ | å«ä¹‰ | å»ºè®® |
|--------|------|------|
| **90-100%** | å¼ºçƒˆå…±è¯†ï¼Œè¯æ®å……åˆ† | å¯ç›´æ¥é‡‡çº³å»ºè®® |
| **80-89%** | åŸºæœ¬å…±è¯†ï¼Œå°åˆ†æ­§ | é‡‡çº³ä½†æ³¨æ„æåŠçš„æ³¨æ„äº‹é¡¹ |
| **70-79%** | æœ‰å…±è¯†ä½†æœ‰äº‰è®® | ä»”ç»†è¯„ä¼°trade-offs |
| **60-69%** | å¼±å…±è¯†ï¼Œæ˜æ˜¾åˆ†æ­§ | éœ€è¦æ›´å¤šä¿¡æ¯æˆ–ä¸“å®¶æ„è§ |
| **<60%** | æ— å…±è¯†ï¼Œé«˜åº¦äº‰è®® | é‡æ–°å®¡è®®æˆ–å¯»æ±‚äººç±»ä¸“å®¶ |

**ç¤ºä¾‹ï¼š**
```
Confidence: 85%

å«ä¹‰ï¼š
- 4ä¸ªæ¨¡å‹ä¸­æœ‰3ä¸ªæ”¯æŒåŒä¸€æ–¹å‘
- æœ‰ä¸€äº›è¾¹ç¼˜äº‰è®®ä½†ä¸å½±å“æ ¸å¿ƒç»“è®º
- ä¸»è¦trade-offså·²å……åˆ†è®¨è®º
- å¯ä»¥é‡‡çº³ï¼Œä½†æ³¨æ„æ–‡æ¡£ä¸­çš„æ³¨æ„äº‹é¡¹
```

### Q6: å¯ä»¥ç”¨äºå“ªäº›ç¼–ç¨‹è¯­è¨€å’ŒæŠ€æœ¯æ ˆï¼Ÿ

**é€‚ç”¨èŒƒå›´ï¼šé€šç”¨æŠ€æœ¯é—®é¢˜**

LLM Council å¯ä»¥å®¡è®®ä»»ä½•æŠ€æœ¯é¢†åŸŸçš„é—®é¢˜ï¼š

**ç¼–ç¨‹è¯­è¨€ï¼š**
- Python, JavaScript/TypeScript, Java, C++, Go, Rust, PHP, Ruby, Swift, Kotlin ç­‰

**æ¡†æ¶å’Œåº“ï¼š**
- Web: React, Vue, Angular, Django, Flask, Express, Spring Boot
- Mobile: React Native, Flutter, iOS/Android
- ML: TensorFlow, PyTorch, scikit-learn
- äº‘: AWS, GCP, Azure

**æ¶æ„å’Œç³»ç»Ÿï¼š**
- å¾®æœåŠ¡ vs å•ä½“
- SQL vs NoSQL
- REST vs GraphQL vs gRPC
- æ¶ˆæ¯é˜Ÿåˆ—ã€ç¼“å­˜ç­–ç•¥
- éƒ¨ç½²å’Œ DevOps

**å¼€å‘å®è·µï¼š**
- ä»£ç å®¡æŸ¥
- æµ‹è¯•ç­–ç•¥
- æ€§èƒ½ä¼˜åŒ–
- å®‰å…¨æœ€ä½³å®è·µ

**å”¯ä¸€é™åˆ¶ï¼š**
- é—®é¢˜å¿…é¡»æ˜¯æŠ€æœ¯æ€§çš„
- éœ€è¦æ–‡å­—æè¿°ï¼ˆä»£ç å¯ä»¥åŒ…å«åœ¨é—®é¢˜ä¸­ï¼‰

### Q7: å®¡è®®ç»“æœå¯ä»¥ä¿å­˜å—ï¼Ÿ

**æ˜¯çš„ï¼Œå¤šç§æ–¹å¼ä¿å­˜ï¼š**

**æ–¹æ³• 1: JSON å¯¼å‡º**
```bash
python3 scripts/council_deliberation.py \
  --question "Your question" \
  --output json > result_2024_11_28.json
```

**æ–¹æ³• 2: Markdown ä¿å­˜**
```bash
python3 scripts/council_deliberation.py \
  --question "Your question" \
  --output markdown > result_2024_11_28.md
```

**æ–¹æ³• 3: åœ¨ Claude Code ä¸­å¤åˆ¶**
```
# å®¡è®®å®Œæˆåï¼Œé€‰æ‹©å…¨éƒ¨å†…å®¹å¹¶å¤åˆ¶
# ç²˜è´´åˆ° Markdown æ–‡ä»¶æˆ–æ–‡æ¡£ä¸­
```

**æ–¹æ³• 4: ç¼–ç¨‹æ–¹å¼**
```python
import asyncio
import json
from council_deliberation import run_full_deliberation

async def save_result():
    result = await run_full_deliberation("Your question")

    # ä¿å­˜ä¸º JSON
    with open('deliberation_archive.json', 'a') as f:
        json.dump(result, f, indent=2)

    # ä¿å­˜ä¸º Markdown
    from format_results import format_markdown
    with open('deliberation_archive.md', 'a') as f:
        f.write(format_markdown(result))
        f.write("\n\n---\n\n")

asyncio.run(save_result())
```

**æœªæ¥åŠŸèƒ½ï¼ˆv2.0 è®¡åˆ’ï¼‰ï¼š**
- è‡ªåŠ¨ç¼“å­˜å†å²å®¡è®®
- æœç´¢è¿‡å¾€ç»“æœ
- ç»“æœå¯¹æ¯”å·¥å…·

### Q8: å¯ä»¥æ·»åŠ è‡ªå·±çš„æ¨¡å‹å—ï¼Ÿ

**å¯ä»¥ï¼**

**æ­¥éª¤ 1: æŸ¥æ‰¾å¯ç”¨æ¨¡å‹**
è®¿é—® [OpenRouter Models](https://openrouter.ai/models) æŸ¥çœ‹æ‰€æœ‰æ”¯æŒçš„æ¨¡å‹ã€‚

**æ­¥éª¤ 2: ç¼–è¾‘é…ç½®**
```json
{
  "council_models": [
    "anthropic/claude-3-5-sonnet-20241022",  // æ·»åŠ  Claude
    "openai/gpt-4o",                         // æ·»åŠ  GPT-4
    "meta-llama/llama-3.2-90b-vision-instruct", // æ·»åŠ  Llama
    "google/gemini-pro-1.5"                  // æ·»åŠ  Gemini
  ],
  "chairman_model": "anthropic/claude-3-5-sonnet-20241022"
}
```

**æ­¥éª¤ 3: æµ‹è¯•**
```bash
python3 scripts/council_deliberation.py \
  --question "Test question" \
  --models "your-model-1" "your-model-2" "your-model-3"
```

**æ³¨æ„äº‹é¡¹ï¼š**
- æ¨¡å‹å¿…é¡»åœ¨ OpenRouter ä¸Šå¯ç”¨
- ä¸åŒæ¨¡å‹æœ‰ä¸åŒæˆæœ¬
- æŸäº›æ¨¡å‹å¯èƒ½è¾ƒæ…¢
- æ¨è 3-6 ä¸ªæ¨¡å‹å¹³è¡¡è´¨é‡å’Œæ•ˆç‡

### Q9: ä¸ºä»€ä¹ˆæœ‰æ—¶æŸäº›æ¨¡å‹ä¼šå¤±è´¥ï¼Ÿ

**å¸¸è§åŸå› ï¼š**

1. **æ¨¡å‹æš‚æ—¶ä¸å¯ç”¨**
   - OpenRouter çš„æä¾›å•†é—®é¢˜
   - æ¨¡å‹è¿‡è½½
   - ç»´æŠ¤ä¸­

2. **è¶…æ—¶**
   - é—®é¢˜è¿‡äºå¤æ‚
   - æ¨¡å‹å“åº”æ…¢
   - ç½‘ç»œå»¶è¿Ÿ

3. **API é™åˆ¶**
   - Rate limiting
   - ä½™é¢ä¸è¶³
   - åŒºåŸŸé™åˆ¶

**å¤„ç†æ–¹å¼ï¼š**

**è‡ªåŠ¨å¤„ç†ï¼ˆå·²å†…ç½®ï¼‰ï¼š**
- âœ… Graceful degradationï¼ˆä¼˜é›…é™çº§ï¼‰
- âœ… åªè¦ â‰¥2 æ¨¡å‹æˆåŠŸï¼Œç»§ç»­å®¡è®®
- âœ… å¤±è´¥æ¨¡å‹è¢«è·³è¿‡
- âœ… ç”¨æˆ·çœ‹åˆ°æ¸…æ¥šçš„å¤±è´¥æç¤º

**ä½ å¯ä»¥åšçš„ï¼š**
```bash
# é‡è¯•å¯èƒ½è§£å†³ä¸´æ—¶é—®é¢˜
python3 scripts/council_deliberation.py --question "..."

# æˆ–ä½¿ç”¨ä¸åŒçš„æ¨¡å‹ç»„åˆ
--models "stable-model-1" "stable-model-2"
```

### Q10: LLM Council é€‚åˆå›¢é˜Ÿä½¿ç”¨å—ï¼Ÿ

**æ˜¯çš„ï¼Œéå¸¸é€‚åˆå›¢é˜Ÿåä½œå†³ç­–ï¼**

**å›¢é˜Ÿä½¿ç”¨åœºæ™¯ï¼š**

1. **æ¶æ„è¯„å®¡ä¼šè®®**
   - ä¼šå‰ï¼šå›¢é˜Ÿæˆå‘˜æå‡ºæ¶æ„æ–¹æ¡ˆ
   - ä¼šä¸­ï¼šè¿è¡Œ LLM Council å®¡è®®
   - ä¼šåï¼šåŸºäºå¤šæ¨¡å‹æ´å¯Ÿè®¨è®º

2. **ä»£ç å®¡æŸ¥è¡¥å……**
   - PR æäº¤åè¿è¡Œä»£ç å®¡æŸ¥å®¡è®®
   - è¯†åˆ«äººç±»å¯èƒ½é—æ¼çš„é—®é¢˜
   - ä½œä¸ºç¬¬ä¸€é“è‡ªåŠ¨åŒ–å®¡æŸ¥

3. **æŠ€æœ¯é€‰å‹å†³ç­–**
   - æ”¶é›†å›¢é˜Ÿæ„è§
   - è¿è¡Œ Council åˆ†æ
   - ç»“åˆäººç±»åˆ¤æ–­åšæœ€ç»ˆå†³å®š

4. **æ–°äººåŸ¹è®­**
   - å±•ç¤ºå¤šè§’åº¦æŠ€æœ¯æ€è€ƒ
   - å­¦ä¹ å†³ç­–è¿‡ç¨‹
   - ç†è§£trade-offs

**å›¢é˜Ÿé…ç½®å»ºè®®ï¼š**

**å»ºè®® 1: å…±äº«é…ç½®**
```bash
# å›¢é˜Ÿ Git ä»“åº“ä¸­
team-llm-council/
â”œâ”€â”€ config.json         # å›¢é˜Ÿæ ‡å‡†é…ç½®
â”œâ”€â”€ presets/
â”‚   â”œâ”€â”€ architecture.json
â”‚   â”œâ”€â”€ code-review.json
â”‚   â””â”€â”€ database.json
â””â”€â”€ README.md           # å›¢é˜Ÿä½¿ç”¨æŒ‡å—
```

**å»ºè®® 2: åˆ›å»ºå®¡è®®æ¨¡æ¿**
```markdown
# Architecture Decision Record (ADR)

Date: 2024-11-28
Decision: [æŠ€æœ¯é€‰æ‹©]
Status: Deliberated

## Context
[èƒŒæ™¯æè¿°]

## LLM Council Deliberation
[ç²˜è´´å®¡è®®ç»“æœ]

## Team Discussion
[å›¢é˜Ÿè®¨è®ºè¦ç‚¹]

## Final Decision
[æœ€ç»ˆå†³å®š]

## Consequences
[å½±å“å’Œåæœ]
```

**å»ºè®® 3: æˆæœ¬æ§åˆ¶**
- å›¢é˜Ÿå…±ç”¨ OpenRouter è´¦æˆ·
- è®¾ç½®æœˆåº¦é¢„ç®—
- ä»…é‡è¦å†³ç­–ä½¿ç”¨ Full æ¨¡å¼
- æ—¥å¸¸é—®é¢˜ä½¿ç”¨ Quick æ¨¡å¼

---

## æˆæœ¬ä¼°ç®—

### è¯¦ç»†æˆæœ¬åˆ†æ

**åŸºäº OpenRouter ä»·æ ¼ï¼ˆ2024å¹´11æœˆï¼‰ï¼š**

| æ¨¡å‹ | Input (per 1M tokens) | Output (per 1M tokens) | å…¸å‹å“åº”æˆæœ¬ |
|------|----------------------|------------------------|-------------|
| DeepSeek-V3 | $0.27 | $1.10 | $0.002-0.004 |
| Qwen3-235B-A22B | $0.50 | $1.50 | $0.003-0.006 |
| kim2-thinking | $1.00 | $3.00 | $0.005-0.010 |
| Kimi-K2-Instruct | $0.80 | $2.40 | $0.004-0.008 |
| Gemini-3-Pro (Chairman) | $3.50 | $10.50 | $0.015-0.030 |

**å®¡è®®æ¨¡å¼æˆæœ¬ï¼š**

**Full æ¨¡å¼ï¼ˆæ¨èç”¨äºé‡è¦å†³ç­–ï¼‰ï¼š**
```
Stage 1 (4 models):
  DeepSeek-V3:        $0.002-0.004
  Qwen3-235B:         $0.003-0.006
  kim2-thinking:      $0.005-0.010
  Kimi-K2:            $0.004-0.008
  å°è®¡:                $0.014-0.028

Stage 2 (4 rankings):
  DeepSeek-V3:        $0.002-0.004
  Qwen3-235B:         $0.003-0.006
  kim2-thinking:      $0.005-0.010
  Kimi-K2:            $0.004-0.008
  å°è®¡:                $0.014-0.028

Stage 3 (Chairman):
  Gemini-3-Pro:       $0.015-0.030

æ€»è®¡: $0.043-0.086 per deliberation
å¹³å‡: ~$0.065 per deliberation
```

**Quick æ¨¡å¼ï¼ˆæ¨èç”¨äºæ—¥å¸¸é—®é¢˜ï¼‰ï¼š**
```
Stage 1 (4 models):     $0.014-0.028
Stage 3 (Chairman):     $0.015-0.030

æ€»è®¡: $0.029-0.058 per deliberation
å¹³å‡: ~$0.044 per deliberation

èŠ‚çœ: ~32% vs Full æ¨¡å¼
```

### æœˆåº¦æˆæœ¬ä¼°ç®—

**åœºæ™¯ 1: ä¸ªäººå¼€å‘è€…ï¼ˆè½»åº¦ä½¿ç”¨ï¼‰**
```
5 æ¬¡/å‘¨ Ã— 4 å‘¨ = 20 æ¬¡/æœˆ
æ¨¡å¼: 70% Quick, 30% Full

æˆæœ¬:
  Quick: 14 Ã— $0.044 = $0.62
  Full:   6 Ã— $0.065 = $0.39
  æ€»è®¡: $1.01/æœˆ

æ¨èå……å€¼: $5 (å¯ç”¨ 5 ä¸ªæœˆ)
```

**åœºæ™¯ 2: ä¸“ä¸šå¼€å‘è€…ï¼ˆä¸­åº¦ä½¿ç”¨ï¼‰**
```
15 æ¬¡/å‘¨ Ã— 4 å‘¨ = 60 æ¬¡/æœˆ
æ¨¡å¼: 50% Quick, 50% Full

æˆæœ¬:
  Quick: 30 Ã— $0.044 = $1.32
  Full:  30 Ã— $0.065 = $1.95
  æ€»è®¡: $3.27/æœˆ

æ¨èå……å€¼: $10 (å¯ç”¨ 3 ä¸ªæœˆ)
```

**åœºæ™¯ 3: å›¢é˜Ÿä½¿ç”¨ï¼ˆé‡åº¦ï¼‰**
```
50 æ¬¡/å‘¨ Ã— 4 å‘¨ = 200 æ¬¡/æœˆ
æ¨¡å¼: 40% Quick, 60% Full

æˆæœ¬:
  Quick:  80 Ã— $0.044 = $3.52
  Full:  120 Ã— $0.065 = $7.80
  æ€»è®¡: $11.32/æœˆ

æ¨èå……å€¼: $25 (å¯ç”¨ 2 ä¸ªæœˆ)
```

### æˆæœ¬ä¼˜åŒ–ç­–ç•¥

**ç­–ç•¥ 1: æ™ºèƒ½æ¨¡å¼é€‰æ‹©**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é—®é¢˜é‡è¦æ€§ â†’ æ¨¡å¼é€‰æ‹©              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å…³é”®å†³ç­– (ç”Ÿäº§ç¯å¢ƒ) â†’ Full æ¨¡å¼    â”‚
â”‚  ä¸­ç­‰å†³ç­– (ç‰¹æ€§è®¾è®¡) â†’ Full æ¨¡å¼    â”‚
â”‚  æ—¥å¸¸é—®é¢˜ (å­¦ä¹ ç ”ç©¶) â†’ Quick æ¨¡å¼   â”‚
â”‚  ç®€å•é—®é¢˜ (å¿«é€ŸéªŒè¯) â†’ Quick æ¨¡å¼   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

èŠ‚çœ: 30-40% æˆæœ¬
```

**ç­–ç•¥ 2: ä½¿ç”¨ä¾¿å®œçš„æ¨¡å‹**
```json
{
  "council_models": [
    "DeepSeek-V3",              // $0.002-0.004 âœ… ä¾¿å®œ
    "Qwen3-235B-A22B",          // $0.003-0.006 âœ… ä¾¿å®œ
    "google/gemini-flash-1.5"   // $0.001-0.003 âœ… éå¸¸ä¾¿å®œ
  ],
  "chairman_model": "DeepSeek-V3"  // æ”¹ç”¨ä¾¿å®œçš„
}

èŠ‚çœ: 50-60% æˆæœ¬ï¼ˆä½†è´¨é‡å¯èƒ½ç•¥é™ï¼‰
```

**ç­–ç•¥ 3: å‡å°‘æ¨¡å‹æ•°é‡**
```json
{
  "council_models": [
    "DeepSeek-V3",
    "Qwen3-235B-A22B"    // åªç”¨2ä¸ªæ¨¡å‹
  ]
}

æˆæœ¬: ~$0.025 per deliberation
èŠ‚çœ: 60% vs æ ‡å‡†é…ç½®

é€‚ç”¨: é¢„ç®—ç´§å¼ ä½†ä»éœ€å¤šè§†è§’
```

**ç­–ç•¥ 4: åˆ†é˜¶æ®µå†³ç­–**
```
ç¬¬1è½®: Quick æ¨¡å¼ ($0.044)
       â†“
è¯„ä¼°æ˜¯å¦éœ€è¦æ›´æ·±å…¥åˆ†æ
       â†“
ç¬¬2è½® (å¯é€‰): Full æ¨¡å¼ ($0.065)

å¹³å‡æˆæœ¬: $0.044-0.055 (å¤§å¤šæ•°é—®é¢˜ç¬¬1è½®å°±å¤Ÿ)
èŠ‚çœ: 15-30%
```

### ROI åˆ†æ

**æ—¶é—´èŠ‚çœä»·å€¼ï¼š**

å‡è®¾å¼€å‘è€…æ—¶è–ª $50ï¼š

**åœºæ™¯: æ¶æ„å†³ç­–**
```
ä¼ ç»Ÿæ–¹å¼:
  ç ”ç©¶å„é€‰é¡¹: 2å°æ—¶
  å†™å¯¹æ¯”æ–‡æ¡£: 1å°æ—¶
  å›¢é˜Ÿè®¨è®º: 1å°æ—¶
  æ€»è®¡: 4å°æ—¶ = $200

LLM Council:
  è¿è¡Œå®¡è®®: 2åˆ†é’Ÿ
  é˜…è¯»ç»“æœ: 15åˆ†é’Ÿ
  å›¢é˜Ÿè®¨è®º: 30åˆ†é’Ÿ
  æ€»è®¡: 47åˆ†é’Ÿ â‰ˆ $40

  Councilæˆæœ¬: $0.065

èŠ‚çœ: $160 - $0.065 = $159.94
ROI: 159.94 / 0.065 = 2461x
```

**åœºæ™¯: ä»£ç å®¡æŸ¥**
```
ä¼ ç»Ÿæ–¹å¼:
  äººå·¥å®¡æŸ¥: 30åˆ†é’Ÿ = $25

LLM Council:
  è‡ªåŠ¨å®¡æŸ¥: 2åˆ†é’Ÿ = $1.67
  Councilæˆæœ¬: $0.065

èŠ‚çœ: $25 - $1.67 - $0.065 = $23.27
ROI: 23.27 / 0.065 = 358x
```

**ç»“è®ºï¼š**
å³ä½¿æ¯å¤©ä½¿ç”¨å¤šæ¬¡ï¼Œæˆæœ¬ç›¸å¯¹äºèŠ‚çœçš„æ—¶é—´å’Œæé«˜çš„å†³ç­–è´¨é‡æ¥è¯´å‡ ä¹å¯ä»¥å¿½ç•¥ã€‚

---

## æœ€ä½³å®è·µ

### 1. æé—®çš„è‰ºæœ¯

**âŒ ä¸å¥½çš„é—®é¢˜ï¼š**
```
"Pythonå¥½è¿˜æ˜¯JavaScriptå¥½ï¼Ÿ"
â†’ å¤ªå®½æ³›ï¼Œç¼ºä¹ä¸Šä¸‹æ–‡
```

**âœ… å¥½çš„é—®é¢˜ï¼š**
```
"å¯¹äºä¸€ä¸ªå¤„ç†å®æ—¶æ•°æ®æµçš„åç«¯APIï¼Œéœ€è¦æ”¯æŒ100k+ req/sï¼Œ
Pythonçš„asyncioå’ŒJavaScriptçš„Node.jså“ªä¸ªæ›´åˆé€‚ï¼Ÿ
æˆ‘ä»¬å›¢é˜Ÿå¯¹ä¸¤è€…éƒ½æœ‰ç»éªŒï¼Œä¸»è¦è€ƒè™‘æ€§èƒ½å’Œå¯ç»´æŠ¤æ€§ã€‚"

â†’ å…·ä½“åœºæ™¯ã€æ˜ç¡®éœ€æ±‚ã€ç›¸å…³èƒŒæ™¯
```

**æé—®æ£€æŸ¥æ¸…å•ï¼š**
- [ ] æä¾›å…·ä½“åœºæ™¯å’Œä¸Šä¸‹æ–‡
- [ ] è¯´æ˜å…³é”®éœ€æ±‚å’Œé™åˆ¶
- [ ] åŒ…å«ç›¸å…³æŠ€æœ¯æ ˆä¿¡æ¯
- [ ] æ˜ç¡®å†³ç­–çš„é‡è¦æ€§ï¼ˆå…³ç³»åˆ°æˆæœ¬é€‰æ‹©ï¼‰
- [ ] é•¿åº¦é€‚ä¸­ï¼ˆ50-500è¯ï¼‰

### 2. è§£è¯»å®¡è®®ç»“æœ

**é˜…è¯»é¡ºåºå»ºè®®ï¼š**

**å¿«é€Ÿæµè§ˆï¼ˆ5åˆ†é’Ÿï¼‰ï¼š**
1. å…ˆçœ‹ **Stage 3 ç»¼åˆç»“è®º**ï¼ˆæœ€ç»ˆå»ºè®®ï¼‰
2. æŸ¥çœ‹ **ä¿¡å¿ƒåº¦**ï¼ˆå†³å®šæ˜¯å¦ç›´æ¥é‡‡çº³ï¼‰
3. æ‰«æ **Aggregate Rankings**ï¼ˆäº†è§£å…±è¯†ç¨‹åº¦ï¼‰

**æ·±å…¥ç†è§£ï¼ˆ15åˆ†é’Ÿï¼‰ï¼š**
1. é˜…è¯» **æ’åæœ€é«˜çš„æ¨¡å‹å“åº”**ï¼ˆæœ€ä½³åˆ†æï¼‰
2. æŸ¥çœ‹ **æ’åæœ€ä½çš„æ¨¡å‹å“åº”**ï¼ˆä¸åŒè§†è§’ï¼‰
3. è¯†åˆ« **åˆ†æ­§ç‚¹**ï¼ˆéœ€è¦æ³¨æ„çš„trade-offsï¼‰

**å…¨é¢æŒæ¡ï¼ˆ30åˆ†é’Ÿï¼‰ï¼š**
1. é˜…è¯»æ‰€æœ‰ Stage 1 å“åº”
2. ç†è§£ Stage 2 è¯„å®¡é€»è¾‘
3. æå–å…³é”®æ´å¯Ÿå’Œè¡ŒåŠ¨é¡¹
4. æ•´ç†æˆå†³ç­–æ–‡æ¡£

### 3. å›¢é˜Ÿåä½œæµç¨‹

**ä¼šå‰ï¼ˆå‡†å¤‡ï¼‰ï¼š**
```
1. æ˜ç¡®å†³ç­–é—®é¢˜
2. è¿è¡Œ LLM Council å®¡è®®
3. å°†ç»“æœåˆ†äº«ç»™å›¢é˜Ÿ
4. æ¯äººæå‰é˜…è¯»
```

**ä¼šä¸­ï¼ˆè®¨è®ºï¼‰ï¼š**
```
1. ç®€è¦ä»‹ç»å®¡è®®ç»“æœ (5åˆ†é’Ÿ)
2. è®¨è®ºå›¢é˜Ÿæœ€å…³æ³¨çš„ç‚¹ (15åˆ†é’Ÿ)
3. è¯†åˆ«é—æ¼çš„è€ƒè™‘å› ç´  (10åˆ†é’Ÿ)
4. è¾¾æˆå†³ç­–å…±è¯† (10åˆ†é’Ÿ)

æ€»è®¡: 40åˆ†é’Ÿé«˜æ•ˆä¼šè®®
vs ä¼ ç»Ÿ: 2å°æ—¶ brainstorming
```

**ä¼šåï¼ˆè®°å½•ï¼‰ï¼š**
```
1. è®°å½•æœ€ç»ˆå†³ç­–
2. å½’æ¡£å®¡è®®ç»“æœ
3. è®¾ç½®åç»­æ£€æŸ¥ç‚¹
```

### 4. ä½•æ—¶è¯¥å’Œä¸è¯¥ä½¿ç”¨

**âœ… æ¨èä½¿ç”¨çš„åœºæ™¯ï¼š**

| åœºæ™¯ | ç†ç”± |
|------|------|
| æ¶æ„å†³ç­– | å¤šè§†è§’é¿å…ç‰‡é¢ï¼Œè¯†åˆ«æ½œåœ¨é—®é¢˜ |
| æŠ€æœ¯é€‰å‹ | ç³»ç»Ÿå¯¹æ¯”trade-offsï¼Œé™ä½é£é™© |
| å®‰å…¨å®¡æŸ¥ | å…¨é¢è¯†åˆ«æ¼æ´ï¼Œå¤šå±‚æ¬¡æ£€æŸ¥ |
| æ€§èƒ½ä¼˜åŒ– | å¤šç§ä¼˜åŒ–ç­–ç•¥ï¼Œåˆ›æ–°æ€è·¯ |
| ä»£ç é‡æ„ | è¯„ä¼°å½±å“èŒƒå›´ï¼Œæœ€ä½³è·¯å¾„ |
| æ–°æŠ€æœ¯è¯„ä¼° | ä»å¤šè§’åº¦äº†è§£æ–°æŠ€æœ¯ |

**âŒ ä¸æ¨èä½¿ç”¨çš„åœºæ™¯ï¼š**

| åœºæ™¯ | åŸå›  | æ›¿ä»£æ–¹æ¡ˆ |
|------|------|----------|
| ç®€å•äº‹å®æŸ¥è¯¢ | "Pythonç‰ˆæœ¬æ˜¯å¤šå°‘ï¼Ÿ" | ç›´æ¥æŸ¥æ–‡æ¡£ |
| æ•°å­¦è®¡ç®— | "123 Ã— 456 = ?" | è®¡ç®—å™¨ |
| ç´§æ€¥Bugä¿®å¤ | éœ€è¦ç«‹å³å“åº” | å•æ¨¡å‹å¿«é€Ÿåˆ†æ |
| éæŠ€æœ¯é—®é¢˜ | "ä»Šå¤©åƒä»€ä¹ˆï¼Ÿ" | ä¸é€‚ç”¨ |
| é¢„ç®—æç´§ | æˆæœ¬æ•æ„Ÿ | å…è´¹å•æ¨¡å‹ |
| ç¦»çº¿ç¯å¢ƒ | æ— ç½‘ç»œè¿æ¥ | æœ¬åœ°å·¥å…· |

### 5. ç»“æœå­˜æ¡£å’Œå¤ç”¨

**å»ºç«‹çŸ¥è¯†åº“ï¼š**
```
team-decisions/
â”œâ”€â”€ architecture/
â”‚   â”œâ”€â”€ 2024-11-28-rest-vs-graphql.md
â”‚   â”œâ”€â”€ 2024-11-15-microservices-decision.md
â”‚   â””â”€â”€ ...
â”œâ”€â”€ database/
â”‚   â”œâ”€â”€ 2024-11-20-postgres-vs-mongo.md
â”‚   â””â”€â”€ ...
â”œâ”€â”€ code-reviews/
â”‚   â”œâ”€â”€ 2024-11-25-auth-middleware-review.md
â”‚   â””â”€â”€ ...
â””â”€â”€ templates/
    â””â”€â”€ adr-template.md
```

**ADR æ¨¡æ¿ï¼ˆArchitecture Decision Recordï¼‰ï¼š**
```markdown
# ADR-XXX: [å†³ç­–æ ‡é¢˜]

Date: YYYY-MM-DD
Status: [Proposed | Accepted | Deprecated | Superseded]
Deciders: [Team members]

## Context
[å†³ç­–èƒŒæ™¯å’Œé—®é¢˜æè¿°]

## LLM Council Deliberation

### Question
[æäº¤ç»™ Council çš„é—®é¢˜]

### Models Consensus
[Stage 3 ç»¼åˆç»“è®º]

### Key Insights
- [æ´å¯Ÿ1]
- [æ´å¯Ÿ2]
- [æ´å¯Ÿ3]

### Confidence: [X%]

### Dissenting Views
[å¦‚æœæœ‰é‡è¦çš„åå¯¹æ„è§]

## Team Discussion
[å›¢é˜Ÿè®¨è®ºè¦ç‚¹å’Œé¢å¤–è€ƒè™‘]

## Decision
[æœ€ç»ˆå†³å®š]

## Consequences

### Positive
- [ç§¯æå½±å“1]
- [ç§¯æå½±å“2]

### Negative
- [è´Ÿé¢å½±å“1]
- [è´Ÿé¢å½±å“2]

### Mitigation
[ç¼“è§£è´Ÿé¢å½±å“çš„ç­–ç•¥]

## Follow-up
- [ ] [åç»­è¡ŒåŠ¨1]
- [ ] [åç»­è¡ŒåŠ¨2]

## References
- LLM Council Deliberation: [link to full results]
- Related ADRs: [links]
- External References: [links]
```

### 6. æŒç»­æ”¹è¿›

**å®šæœŸå®¡æŸ¥ï¼ˆæ¯æœˆï¼‰ï¼š**
```
1. å›é¡¾æœ¬æœˆæ‰€æœ‰å®¡è®®
2. è¯†åˆ«å“ªäº›å†³ç­–æœ€æœ‰ä»·å€¼
3. åˆ†ææˆæœ¬æ•ˆç›Š
4. ä¼˜åŒ–æ¨¡å‹é…ç½®
5. æ›´æ–°å›¢é˜Ÿæœ€ä½³å®è·µ
```

**åé¦ˆå¾ªç¯ï¼š**
```
å†³ç­– â†’ å®æ–½ â†’ ç»“æœ â†’ å›é¡¾å®¡è®®å‡†ç¡®æ€§ â†’ æ”¹è¿›æé—®æ–¹å¼
```

**æ¨¡å‹ç»„åˆä¼˜åŒ–ï¼š**
```python
# è¿½è¸ªå“ªä¸ªæ¨¡å‹ç»„åˆæ•ˆæœæœ€å¥½
{
  "architecture_decisions": {
    "best_models": ["DeepSeek-V3", "Gemini-3-Pro", "Claude-3.5"],
    "avg_confidence": 87%,
    "success_rate": 92%
  },
  "code_review": {
    "best_models": ["GPT-4", "Claude-3.5", "DeepSeek-V3"],
    "avg_confidence": 91%,
    "success_rate": 95%
  }
}
```

---

## é™„å½•

### A. å®Œæ•´é…ç½®ç¤ºä¾‹

```json
{
  "council_models": [
    "DeepSeek-V3",
    "Qwen3-235B-A22B",
    "kim2-thinking",
    "Kimi-K2-Instruct"
  ],
  "chairman_model": "openrouter/google/gemini-3-pro-preview",
  "timeout_seconds": 120,
  "max_retries": 2,
  "cache_enabled": true,
  "cache_ttl_hours": 24,

  "presets": {
    "quick": {
      "models": ["DeepSeek-V3", "Qwen3-235B-A22B"],
      "mode": "quick"
    },
    "thorough": {
      "models": [
        "DeepSeek-V3",
        "Qwen3-235B-A22B",
        "anthropic/claude-3-5-sonnet-20241022",
        "openai/gpt-4o",
        "kim2-thinking",
        "Kimi-K2-Instruct"
      ],
      "mode": "full"
    }
  }
}
```

### B. ç¯å¢ƒå˜é‡å®Œæ•´åˆ—è¡¨

```bash
# å¿…éœ€
OPENROUTER_API_KEY=sk-or-v1-...

# å¯é€‰
COUNCIL_CONFIG_PATH=/path/to/custom/config.json
COUNCIL_CACHE_DIR=/path/to/cache
COUNCIL_LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR
COUNCIL_TIMEOUT=120     # è¦†ç›–config.jsonä¸­çš„è®¾ç½®
```

### C. å‘½ä»¤è¡Œå‚æ•°å®Œæ•´åˆ—è¡¨

```bash
python3 scripts/council_deliberation.py \
  --question "Your question" \              # å¿…éœ€ï¼šè¦å®¡è®®çš„é—®é¢˜
  --mode {full|quick} \                     # å¯é€‰ï¼šå®¡è®®æ¨¡å¼ï¼ˆé»˜è®¤ fullï¼‰
  --output {markdown|json} \                # å¯é€‰ï¼šè¾“å‡ºæ ¼å¼ï¼ˆé»˜è®¤ markdownï¼‰
  --models MODEL1 MODEL2 ... \              # å¯é€‰ï¼šè‡ªå®šä¹‰æ¨¡å‹åˆ—è¡¨
  --chairman MODEL \                        # å¯é€‰ï¼šè‡ªå®šä¹‰ä¸»å¸­æ¨¡å‹
  --timeout SECONDS \                       # å¯é€‰ï¼šè¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰
  --verbose                                 # å¯é€‰ï¼šè¯¦ç»†è¾“å‡º
```

### D. é”™è¯¯ä»£ç å‚è€ƒ

| ä»£ç  | é”™è¯¯ | è§£å†³æ–¹æ¡ˆ |
|------|------|----------|
| E001 | API Key missing | è®¾ç½® OPENROUTER_API_KEY |
| E002 | Question too short | é—®é¢˜è‡³å°‘10å­—ç¬¦ |
| E003 | Question too long | é—®é¢˜æœ€å¤š5000å­—ç¬¦ |
| E004 | Too few models | è‡³å°‘2ä¸ªæ¨¡å‹ |
| E005 | Model timeout | å¢åŠ timeoutæˆ–ç®€åŒ–é—®é¢˜ |
| E006 | Insufficient responses | è‡³å°‘2ä¸ªæ¨¡å‹éœ€æˆåŠŸ |
| E007 | Chairman failed | æ£€æŸ¥ç½‘ç»œå’ŒAPIçŠ¶æ€ |
| E008 | Invalid model ID | æ£€æŸ¥OpenRouteræ¨¡å‹åˆ—è¡¨ |
| E009 | Network error | æ£€æŸ¥ç½‘ç»œè¿æ¥ |
| E010 | Rate limit | ç­‰å¾…æˆ–å‡å°‘è¯·æ±‚é¢‘ç‡ |

### E. æœ¯è¯­è¡¨

| æœ¯è¯­ | å®šä¹‰ |
|------|------|
| **Council** | å‚ä¸å®¡è®®çš„å¤šä¸ªAIæ¨¡å‹ç»„æˆçš„å§”å‘˜ä¼š |
| **Chairman** | è´Ÿè´£æœ€ç»ˆç»¼åˆçš„ä¸»å¸­æ¨¡å‹ï¼ˆé€šå¸¸æ˜¯Gemini-3-Proï¼‰ |
| **Stage 1** | ä¸ªä½“å“åº”é˜¶æ®µï¼Œå„æ¨¡å‹ç‹¬ç«‹åˆ†æ |
| **Stage 2** | åŒ¿ååŒè¡Œè¯„å®¡é˜¶æ®µï¼Œæ¨¡å‹äº’ç›¸è¯„åˆ† |
| **Stage 3** | ä¸»å¸­ç»¼åˆé˜¶æ®µï¼Œç”Ÿæˆæœ€ç»ˆå»ºè®® |
| **Anonymization** | å°†å“åº”åŒ¿ååŒ–ä¸º"Response A, B, C..."çš„è¿‡ç¨‹ |
| **Aggregate Ranking** | åŸºäºæ‰€æœ‰peerè¯„å®¡è®¡ç®—çš„æ€»ä½“è´¨é‡æ’å |
| **Confidence** | ä¸»å¸­å¯¹æœ€ç»ˆç»“è®ºçš„ä¿¡å¿ƒåº¦ï¼ˆ0-100%ï¼‰ |
| **Full Mode** | å®Œæ•´3é˜¶æ®µå®¡è®®æ¨¡å¼ |
| **Quick Mode** | å¿«é€Ÿ2é˜¶æ®µæ¨¡å¼ï¼ˆè·³è¿‡Stage 2ï¼‰ |
| **Deliberation** | å®Œæ•´çš„å¤šæ¨¡å‹å®¡è®®è¿‡ç¨‹ |

### F. æœ‰ç”¨çš„é“¾æ¥

**å®˜æ–¹èµ„æºï¼š**
- [OpenRouter ä¸»é¡µ](https://openrouter.ai/)
- [OpenRouter æ¨¡å‹åˆ—è¡¨](https://openrouter.ai/models)
- [OpenRouter å®šä»·](https://openrouter.ai/models)
- [OpenRouter API æ–‡æ¡£](https://openrouter.ai/docs)

**ç›¸å…³é¡¹ç›®ï¼š**
- [LLM Council ä¸»é¡¹ç›®](https://github.com/your-repo/llm-council)
- [Claude Code æ–‡æ¡£](https://docs.anthropic.com/claude-code)

**ç¤¾åŒºå’Œæ”¯æŒï¼š**
- GitHub Issues: [æŠ¥å‘Šé—®é¢˜](https://github.com/your-repo/llm-council/issues)
- Discord: [åŠ å…¥è®¨è®º](https://discord.gg/your-discord)

---

## ç»“è¯­

æ­å–œï¼ä½ ç°åœ¨å·²ç»æŒæ¡äº† LLM Council çš„å®Œæ•´ä½¿ç”¨æ–¹æ³•ã€‚

**è®°ä½æ ¸å¿ƒä»·å€¼ï¼š**
- ğŸ¯ å¤šè§†è§’ = æ›´å¥½çš„å†³ç­–
- ğŸ” åŒ¿åè¯„å®¡ = å®¢è§‚è´¨é‡è¯„åˆ¤
- ğŸ“ ä¸“å®¶ç»¼åˆ = æ¸…æ™°å¯è¡Œçš„å»ºè®®

**ç«‹å³å¼€å§‹ï¼š**
1. è®¾ç½® API Key
2. å®‰è£… Skill
3. æå‡ºç¬¬ä¸€ä¸ªæŠ€æœ¯é—®é¢˜
4. ä½“éªŒå¤šæ¨¡å‹å®¡è®®çš„åŠ›é‡ï¼

**éœ€è¦å¸®åŠ©ï¼Ÿ**
- æŸ¥çœ‹ [æ•…éšœæ’é™¤](#æ•…éšœæ’é™¤)
- é˜…è¯» [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)
- æäº¤ Issue æˆ–è”ç³»æ”¯æŒ

ç¥ä½ åšå‡ºæ›´å¥½çš„æŠ€æœ¯å†³ç­–ï¼ğŸš€

---

*æœ€åæ›´æ–°: 2024-11-28*
*ç‰ˆæœ¬: 1.0.0*
*ç»´æŠ¤: LLM Council Team*
